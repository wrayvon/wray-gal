!function(a){a.fn.wraygal=function(r){var e="",l=a.extend({captions:!1,steps:!1,video:!1,animateHeight:!1,fade:!1},r);return this.each(function(){var r,i,t=a(this);if(1==l.captions&&a(t).find(".wraygal__overlay .wraygal__overlay-inner img").after('<div class="wraygal__caption"></div>'),1==l.steps)r=0,i=a(t).find(".wraygal__thumbs img").css("opacity","0"),function a(){r<i.length&&(i.eq(r++).animate({opacity:"1"},500),setTimeout(function(){a()},100))}();var n=0,_=a(t).find(".wraygal__thumbs img").length-1,y=_+1;a(t).find(".wraygal__total").append(y);var o=a(t).parent().height(),s=a(t).find(".wraygal__thumb a");a(s).click(function(){o=a(t).height();var r=a(this).parent().index();if(e=(n=r)+1,a(t).find(".wraygal__current").html("").append(e),a(this).parent().addClass("wraygal__thumb--active"),1==l.video){var i=a(this).children("img").attr("data-source");a('<div class="video-gallery"><div class="video-gallery__overlay-inner"><div class="videowrapper"><iframe class="video-iframe" src="'+i+'?rel=0&autoplay=1" frameborder="0" allowfullscreen></iframe></div><div class="video-gallery__nav"><span class="video-gallery__close"></span><div class="wraygal__number"><span class="wraygal__current"></span>/<span class="wraygal__total"></span></div><span class="wraygal__next"></span><span class="wraygal__prev"></span></div></div></div>').insertBefore(a(".wraygal__thumbs")),a(".wraygal__total").html("").append(y),a(".wraygal__current").html("").append(e)}else{var _=a(this).children("img").attr("data-source");if(a(t).find(".wraygal__overlay .wraygal__overlay-inner").children("img").attr("src",_),1==l.captions){a(t).find(".wraygal__overlay .wraygal__overlay-inner").children(".wraygal__caption").html("");var s=a(this).children("img").attr("alt");a(t).find(".wraygal__overlay .wraygal__overlay-inner").children(".wraygal__caption").append(s)}a(t).find(".wraygal__overlay").fadeIn().attr("tabindex","0").focus(),a(t).find(".wraygal__nav").fadeIn(),a(t).find(".wraygal__overlay img").fadeIn()}return!1}),a(document).keyup(function(r){27==r.keyCode&&a(".wraygal__close").click(),37==r.keyCode&&a(".wraygal__prev").click(),39==r.keyCode&&a(".wraygal__next").click()}),a(t).find(".wraygal__thumbs .wraygal__open-btn").click(function(){o=a(t).parent().height();var r=a(this).parent().index();e=(n=r)+1,a(t).find(".wraygal__current").html("").append(e);var i=a(this).parent().find("img").attr("data-source");if(a(t).find(".wraygal__overlay .wraygal__overlay-inner").parent().find("img").attr("src",i),1==l.captions){a(t).find(".wraygal__overlay .wraygal__overlay-inner").children(".wraygal__caption").html("");var _=a(this).parent().find("img").attr("alt");a(t).find(".wraygal__overlay .wraygal__overlay-inner").children(".wraygal__caption").append(_)}a(t).find(".wraygal__overlay").fadeIn(),a(t).find(".wraygal__nav").fadeIn()}),a("body").on("click",".wraygal__next",function(){if(n===_?n=0:n++,e=n+1,a(t).find(".wraygal__current").html("").append(e),a(".wraygal__thumb--active").removeClass("wraygal__thumb--active").next(".wraygal__thumb").addClass("wraygal__thumb--active"),a(t).find(".wraygal__overlay .wraygal__overlay-inner img").fadeOut(300,function(){var r=a(t).find(".wraygal__thumbs img").eq(n).attr("data-source");if(a(".wraygal__thumb--active").removeClass("wraygal__thumb--active"),a(t).find(".wraygal__thumbs .wraygal__thumb").eq(n).addClass("wraygal__thumb--active"),/youtube/i.test(r)){a(this).children("img").attr("data-source");a(".video-gallery").length?(a(".video-iframe").remove(),a(".videowrapper").append('<iframe class="video-iframe" src="'+r+'?rel=0&autoplay=1" frameborder="0" allowfullscreen></iframe>')):a('<div class="video-gallery"><div class="video-gallery__overlay-inner"><div class="videowrapper"><iframe class="video-iframe" src="'+r+'?rel=0&autoplay=1" frameborder="0" allowfullscreen></iframe></div><div class="video-gallery__nav"><button type="button" class="video-gallery__close"></button><div class="wraygal__number"><span class="wraygal__current"></span>/<span class="wraygal__total"></span></div><button type="button" class="wraygal__next"></button><button type="button" class="wraygal__prev"></button></div></div></div>').insertBefore(a(".wraygal__thumbs")),a(t).find(".wraygal__total").html("").append(y),a(t).find(".wraygal__current").html("").append(e)}else 1==l.video&&(a(t).find(".video-gallery").remove(),a(t).find(".wraygal__overlay").show()),a(t).find(".wraygal__overlay .wraygal__overlay-inner img").attr("src",r),a(t).find(".wraygal__overlay .wraygal__overlay-inner img").fadeIn(300)}),1==l.captions){a(t).find(".wraygal__overlay .wraygal__overlay-inner").children(".wraygal__caption").html("");var r=a(t).find(".wraygal__thumbs img").eq(n).attr("alt");a(t).find(".wraygal__overlay .wraygal__overlay-inner").children(".wraygal__caption").append(r)}}),a("body").on("click",".wraygal__prev",function(){if(0===n?n=_:n--,e=n+1,a(t).find(".wraygal__current").html("").append(e),a(t).find(".wraygal__overlay .wraygal__overlay-inner img").fadeOut(400,function(){var r=a(t).find(".wraygal__thumbs img").eq(n).attr("data-source");if(a(".wraygal__thumb--active").removeClass("wraygal__thumb--active"),a(t).find(".wraygal__thumbs .wraygal__thumb").eq(n).addClass("wraygal__thumb--active"),/youtube/i.test(r)){a(this).children("img").attr("data-source");a(t).find(".video-gallery").length?(a(".video-iframe").remove(),a(".videowrapper").append('<iframe class="video-iframe" src="'+r+'?rel=0&autoplay=1" frameborder="0" allowfullscreen></iframe>')):a('<div class="video-gallery"><div class="video-gallery__overlay-inner"><div class="videowrapper"><iframe class="video-iframe" src="'+r+'?rel=0&autoplay=1" frameborder="0" allowfullscreen></iframe></div><div class="video-gallery__nav"><button type="button" class="video-gallery__close"></button><div class="wraygal__number"><span class="wraygal__current"></span>/<span class="wraygal__total"></span></div><button type="button" class="wraygal__next"></button><button type="button" class="wraygal__prev"></button></div></div></div>').insertBefore(a(".wraygal__thumbs")),a(t).find(".wraygal__total").html("").append(y),a(t).find(".wraygal__current").html("").append(e)}else a(t).find(".video-gallery").length&&(a(t).find(".video-gallery").remove(),a(t).find(".wraygal__overlay").show()),a(t).find(".wraygal__overlay .wraygal__overlay-inner img").attr("src",r),a(t).find(".wraygal__overlay .wraygal__overlay-inner img").fadeIn()}),1==l.captions){a(t).find(".wraygal__overlay .wraygal__overlay-inner").children(".wraygal__caption").html("");var r=a(t).find(".wraygal__thumbs img").eq(n).attr("alt");a(t).find(".wraygal__overlay .wraygal__overlay-inner").children(".wraygal__caption").append(r)}}),a("body").on("click",".wraygal__close",function(){1==l.animateHeight&&a(t).parent().animate({height:o},400,function(){setTimeout(function(){a(t).parent().removeAttr("style")},1e3)}),a(t).find(".wraygal__overlay").fadeOut(400,function(){var r,e;(a(t).find(".wraygal__thumbs").show(),a(".wraygal__thumb--active a").focus(),a(".wraygal__thumb--active").removeClass("wraygal__thumb--active"),1==l.fade)&&a(t).find(".wraygal__thumbs img").css("opacity","0").animate({opacity:"1"},500);if(1==l.steps)r=0,e=a(t).find(".wraygal__thumbs img").css("opacity","0"),function a(){r<e.length&&(e.eq(r++).animate({opacity:"1"},500),setTimeout(function(){a()},100))}()}),a(".video-gallery").remove()})})}}(jQuery);