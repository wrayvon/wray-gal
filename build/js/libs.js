!function(a){a.fn.wraygal=function(r){var e="",l=a.extend({captions:!1,steps:!1,video:!1,animateHeight:!1,fade:!1},r);return this.each(function(){var r,t,i=a(this);if(a(this).prepend('<div class="wraygal__overlay" aria-modal="true"><div class="wraygal__overlay-inner"><img src="/images/example1.jpg" alt="" aria-role="figure" /><div class="wraygal__nav"><button type="button" aria-role="button" class="wraygal__close">Close</button><div class="wraygal__number"><span class="wraygal__current"></span>/ <span class="wraygal__total"></span></div><button type="button" aria-role="button" class="wraygal__next">Next item</button><button type="button" aria-role="button" class="wraygal__prev">Previous item</button></div></div></div>'),1==l.captions&&a(i).find(".wraygal__overlay .wraygal__overlay-inner img").after('<div class="wraygal__caption" aria-label></div>'),1==l.steps)r=0,t=a(i).find(".wraygal__thumbs img").css("opacity","0"),function a(){r<t.length&&(t.eq(r++).animate({opacity:"1"},500),setTimeout(function(){a()},100))}();var n=0,_=a(i).find(".wraygal__thumbs img").length-1,o=_+1;a(i).find(".wraygal__total").append(o);var y=a(i).parent().height(),s=a(i).find(".wraygal__thumb a");a(s).click(function(){y=a(i).height();var r=a(this).parent().index();if(e=(n=r)+1,a(i).find(".wraygal__current").html("").append(e),a(this).parent().addClass("wraygal__thumb--active"),1==l.video){var t=a(this).children("img").attr("data-source");a('<div class="video-gallery"><div class="video-gallery__overlay-inner"><div class="videowrapper"><iframe class="video-iframe" src="'+t+'?rel=0&autoplay=1" frameborder="0" allowfullscreen></iframe></div><div class="video-gallery__nav"><span class="video-gallery__close"></span><div class="wraygal__number"><span class="wraygal__current"></span>/<span class="wraygal__total"></span></div><button type="button" aria-role="button" class="wraygal__next"></button><button type="button" aria-role="button" class="wraygal__prev"></button></div></div></div>').insertBefore(a(".wraygal__thumbs")),a(".wraygal__total").html("").append(o),a(".wraygal__current").html("").append(e)}else{var _=a(this).children("img").attr("data-source");if(a(i).find(".wraygal__overlay .wraygal__overlay-inner").children("img").attr("src",_),1==l.captions){a(i).find(".wraygal__overlay .wraygal__overlay-inner").children(".wraygal__caption").html("");var s=a(this).children("img").attr("alt");a(i).find(".wraygal__overlay .wraygal__overlay-inner").children(".wraygal__caption").append(s)}a(i).find(".wraygal__overlay").addClass("wraygal__overlay--active").fadeIn().attr("tabindex","0").focus(),a(i).find(".wraygal__nav").fadeIn(),a(i).find(".wraygal__overlay img").fadeIn()}return!1}),a(document).keyup(function(r){27==r.keyCode&&a(".wraygal__close").click(),37==r.keyCode&&a(".wraygal__prev").click(),39==r.keyCode&&a(".wraygal__next").click(),9==r.keyCode&&!a("*:focus").closest(".wraygal__overlay").length&&a(".wraygal__overlay--active").length&&a(".wraygal__overlay--active").focus()}),a(i).find(".wraygal__thumbs .wraygal__open-btn").click(function(){y=a(i).parent().height();var r=a(this).parent().index();e=(n=r)+1,a(i).find(".wraygal__current").html("").append(e);var t=a(this).parent().find("img").attr("data-source");if(a(i).find(".wraygal__overlay .wraygal__overlay-inner").parent().find("img").attr("src",t),1==l.captions){a(i).find(".wraygal__overlay .wraygal__overlay-inner").children(".wraygal__caption").html("");var _=a(this).parent().find("img").attr("alt");a(i).find(".wraygal__overlay .wraygal__overlay-inner").children(".wraygal__caption").append(_)}a(i).find(".wraygal__overlay").fadeIn().addClass("wraygal__overlay--active"),a(i).find(".wraygal__nav").fadeIn()}),a("body").on("click",".wraygal__next",function(){if(n===_?n=0:n++,e=n+1,a(i).find(".wraygal__current").html("").append(e),a(".wraygal__thumb--active").removeClass("wraygal__thumb--active").next(".wraygal__thumb").addClass("wraygal__thumb--active"),a(i).find(".wraygal__overlay .wraygal__overlay-inner img").fadeOut(300,function(){var r=a(i).find(".wraygal__thumbs img").eq(n).attr("data-source");if(a(".wraygal__thumb--active").removeClass("wraygal__thumb--active"),a(i).find(".wraygal__thumbs .wraygal__thumb").eq(n).addClass("wraygal__thumb--active"),/youtube/i.test(r)){a(this).children("img").attr("data-source");a(".video-gallery").length?(a(".video-iframe").remove(),a(".videowrapper").append('<iframe class="video-iframe" src="'+r+'?rel=0&autoplay=1" frameborder="0" allowfullscreen></iframe>')):a('<div class="video-gallery"><div class="video-gallery__overlay-inner"><div class="videowrapper"><iframe class="video-iframe" src="'+r+'?rel=0&autoplay=1" frameborder="0" allowfullscreen></iframe></div><div class="video-gallery__nav"><button type="button" aria-role="button" class="video-gallery__close"></button><div class="wraygal__number"><span class="wraygal__current"></span>/<span class="wraygal__total"></span></div><button type="button" aria-role="button" class="wraygal__next"></button><button type="button" aria-role="button" class="wraygal__prev"></button></div></div></div>').insertBefore(a(".wraygal__thumbs")),a(i).find(".wraygal__total").html("").append(o),a(i).find(".wraygal__current").html("").append(e)}else 1==l.video&&(a(i).find(".video-gallery").remove(),a(i).find(".wraygal__overlay").show().addClass("wraygal__overlay--active")),a(i).find(".wraygal__overlay .wraygal__overlay-inner img").attr("src",r),a(i).find(".wraygal__overlay .wraygal__overlay-inner img").fadeIn(300)}),1==l.captions){a(i).find(".wraygal__overlay .wraygal__overlay-inner").children(".wraygal__caption").html("");var r=a(i).find(".wraygal__thumbs img").eq(n).attr("alt");a(i).find(".wraygal__overlay .wraygal__overlay-inner").children(".wraygal__caption").append(r)}}),a("body").on("click",".wraygal__prev",function(){if(0===n?n=_:n--,e=n+1,a(i).find(".wraygal__current").html("").append(e),a(i).find(".wraygal__overlay .wraygal__overlay-inner img").fadeOut(400,function(){var r=a(i).find(".wraygal__thumbs img").eq(n).attr("data-source");if(a(".wraygal__thumb--active").removeClass("wraygal__thumb--active"),a(i).find(".wraygal__thumbs .wraygal__thumb").eq(n).addClass("wraygal__thumb--active"),/youtube/i.test(r)){a(this).children("img").attr("data-source");a(i).find(".video-gallery").length?(a(".video-iframe").remove(),a(".videowrapper").append('<iframe class="video-iframe" src="'+r+'?rel=0&autoplay=1" frameborder="0" allowfullscreen></iframe>')):a('<div class="video-gallery"><div class="video-gallery__overlay-inner"><div class="videowrapper"><iframe class="video-iframe" src="'+r+'?rel=0&autoplay=1" frameborder="0" allowfullscreen></iframe></div><div class="video-gallery__nav"><button type="button" aria-role="button"  class="video-gallery__close"></button><div class="wraygal__number"><span class="wraygal__current"></span>/<span class="wraygal__total"></span></div><button type="button" aria-role="button" class="wraygal__next"></button><button aria-role="button" type="button" class="wraygal__prev"></button></div></div></div>').insertBefore(a(".wraygal__thumbs")),a(i).find(".wraygal__total").html("").append(o),a(i).find(".wraygal__current").html("").append(e)}else a(i).find(".video-gallery").length&&(a(i).find(".video-gallery").remove(),a(i).find(".wraygal__overlay").show().addClass("wraygal__overlay--active")),a(i).find(".wraygal__overlay .wraygal__overlay-inner img").attr("src",r),a(i).find(".wraygal__overlay .wraygal__overlay-inner img").fadeIn()}),1==l.captions){a(i).find(".wraygal__overlay .wraygal__overlay-inner").children(".wraygal__caption").html("");var r=a(i).find(".wraygal__thumbs img").eq(n).attr("alt");a(i).find(".wraygal__overlay .wraygal__overlay-inner").children(".wraygal__caption").append(r)}}),a("body").on("click",".wraygal__close",function(){1==l.animateHeight&&a(i).parent().animate({height:y},400,function(){setTimeout(function(){a(i).parent().removeAttr("style")},1e3)}),a(i).find(".wraygal__overlay").removeClass("wraygal__overlay--active").fadeOut(400,function(){var r,e;(a(i).find(".wraygal__thumbs").show(),a(".wraygal__thumb--active a").focus(),a(".wraygal__thumb--active").removeClass("wraygal__thumb--active"),1==l.fade)&&a(i).find(".wraygal__thumbs img").css("opacity","0").animate({opacity:"1"},500);if(1==l.steps)r=0,e=a(i).find(".wraygal__thumbs img").css("opacity","0"),function a(){r<e.length&&(e.eq(r++).animate({opacity:"1"},500),setTimeout(function(){a()},100))}()}),a(".video-gallery").remove()})})}}(jQuery);