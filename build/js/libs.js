!function(a){a.fn.wraygal=function(r){var e="",l=a.extend({captions:!1,steps:!1,video:!1,animateHeight:!1,fade:!1},r);return this.each(function(){var r,i,n=a(this);if(1==l.captions&&a(n).find(".wraygal__overlay .wraygal__overlay-inner img").after('<div class="wraygal__caption"></div>'),1==l.steps)r=0,i=a(n).find(".wraygal__thumbs img").css("opacity","0"),function a(){r<i.length&&(i.eq(r++).animate({opacity:"1"},500),setTimeout(function(){a()},100))}();var t=0,_=a(n).find(".wraygal__thumbs img").length-1,o=_+1;a(n).find(".wraygal__total").append(o);var y=a(n).parent().height(),d=a(n).find(".wraygal__thumb");a(d).click(function(){y=a(n).height();var r=a(this).index();if(e=(t=r)+1,a(n).find(".wraygal__current").html("").append(e),1==l.video){var i=a(this).children("img").attr("data-source");a('<div class="video-gallery"><div class="video-gallery__overlay-inner"><div class="videowrapper"><iframe class="video-iframe" src="'+i+'?rel=0&autoplay=1" frameborder="0" allowfullscreen></iframe></div><div class="video-gallery__nav"><span class="video-gallery__close"></span><div class="wraygal__number"><span class="wraygal__current"></span>/<span class="wraygal__total"></span></div><span class="wraygal__next"></span><span class="wraygal__prev"></span></div></div></div>').insertBefore(a(".wraygal__thumbs")),a(".wraygal__total").html("").append(o),a(".wraygal__current").html("").append(e)}else{var _=a(this).children("img").attr("data-source");if(a(n).find(".wraygal__overlay .wraygal__overlay-inner").children("img").attr("src",_),1==l.captions){a(n).find(".wraygal__overlay .wraygal__overlay-inner").children(".wraygal__caption").html("");var d=a(this).children("img").attr("alt");a(n).find(".wraygal__overlay .wraygal__overlay-inner").children(".wraygal__caption").append(d)}a(n).find(".wraygal__overlay").fadeIn().attr("tabindex","0").focus(),a(n).find(".wraygal__nav").fadeIn(),a(n).find(".wraygal__overlay img").fadeIn()}}),a(document).keyup(function(r){27==r.keyCode&&a(".wraygal__close").click(),37==r.keyCode&&a(".wraygal__prev").click(),39==r.keyCode&&a(".wraygal__next").click()}),a(n).find(".wraygal__thumbs .wraygal__open-btn").click(function(){y=a(n).parent().height();var r=a(this).parent().index();e=(t=r)+1,a(n).find(".wraygal__current").html("").append(e);var i=a(this).siblings("img").attr("data-source");if(a(n).find(".wraygal__overlay .wraygal__overlay-inner").children("img").attr("src",i),1==l.captions){a(n).find(".wraygal__overlay .wraygal__overlay-inner").children(".wraygal__caption").html("");var _=a(this).siblings("img").attr("alt");a(n).find(".wraygal__overlay .wraygal__overlay-inner").children(".wraygal__caption").append(_)}a(n).find(".wraygal__overlay").fadeIn(),a(n).find(".wraygal__nav").fadeIn()}),a("body").on("click",".wraygal__next",function(){if(t===_?t=0:t++,e=t+1,a(n).find(".wraygal__current").html("").append(e),a(n).find(".wraygal__overlay .wraygal__overlay-inner img").fadeOut(300,function(){var r=a(n).find(".wraygal__thumbs img").eq(t).attr("data-source");if(/youtube/i.test(r)){a(this).children("img").attr("data-source");a(".video-gallery").length?(a(".video-iframe").remove(),a(".videowrapper").append('<iframe class="video-iframe" src="'+r+'?rel=0&autoplay=1" frameborder="0" allowfullscreen></iframe>')):a('<div class="video-gallery"><div class="video-gallery__overlay-inner"><div class="videowrapper"><iframe class="video-iframe" src="'+r+'?rel=0&autoplay=1" frameborder="0" allowfullscreen></iframe></div><div class="video-gallery__nav"><button type="button" class="video-gallery__close"></button><div class="wraygal__number"><span class="wraygal__current"></span>/<span class="wraygal__total"></span></div><button type="button" class="wraygal__next"></button><button type="button" class="wraygal__prev"></button></div></div></div>').insertBefore(a(".wraygal__thumbs")),a(n).find(".wraygal__total").html("").append(o),a(n).find(".wraygal__current").html("").append(e)}else 1==l.video&&(a(n).find(".video-gallery").remove(),a(n).find(".wraygal__overlay").show()),a(n).find(".wraygal__overlay .wraygal__overlay-inner img").attr("src",r),a(n).find(".wraygal__overlay .wraygal__overlay-inner img").fadeIn(300)}),1==l.captions){a(n).find(".wraygal__overlay .wraygal__overlay-inner").children(".wraygal__caption").html("");var r=a(n).find(".wraygal__thumbs img").eq(t).attr("alt");a(n).find(".wraygal__overlay .wraygal__overlay-inner").children(".wraygal__caption").append(r)}}),a("body").on("click",".wraygal__prev",function(){if(0===t?t=_:t--,e=t+1,a(n).find(".wraygal__current").html("").append(e),a(n).find(".wraygal__overlay .wraygal__overlay-inner img").fadeOut(400,function(){var r=a(n).find(".wraygal__thumbs img").eq(t).attr("data-source");if(/youtube/i.test(r)){a(this).children("img").attr("data-source");a(n).find(".video-gallery").length?(a(".video-iframe").remove(),a(".videowrapper").append('<iframe class="video-iframe" src="'+r+'?rel=0&autoplay=1" frameborder="0" allowfullscreen></iframe>')):a('<div class="video-gallery"><div class="video-gallery__overlay-inner"><div class="videowrapper"><iframe class="video-iframe" src="'+r+'?rel=0&autoplay=1" frameborder="0" allowfullscreen></iframe></div><div class="video-gallery__nav"><button type="button" class="video-gallery__close"></button><div class="wraygal__number"><span class="wraygal__current"></span>/<span class="wraygal__total"></span></div><button type="button" class="wraygal__next"></button><button type="button" class="wraygal__prev"></button></div></div></div>').insertBefore(a(".wraygal__thumbs")),a(n).find(".wraygal__total").html("").append(o),a(n).find(".wraygal__current").html("").append(e)}else a(n).find(".video-gallery").length&&(a(n).find(".video-gallery").remove(),a(n).find(".wraygal__overlay").show()),a(n).find(".wraygal__overlay .wraygal__overlay-inner img").attr("src",r),a(n).find(".wraygal__overlay .wraygal__overlay-inner img").fadeIn()}),1==l.captions){a(n).find(".wraygal__overlay .wraygal__overlay-inner").children(".wraygal__caption").html("");var r=a(n).find(".wraygal__thumbs img").eq(t).attr("alt");a(n).find(".wraygal__overlay .wraygal__overlay-inner").children(".wraygal__caption").append(r)}}),a("body").on("click",".wraygal__close",function(){1==l.animateHeight&&a(n).parent().animate({height:y},400,function(){setTimeout(function(){a(n).parent().removeAttr("style")},1e3)}),a(n).find(".wraygal__overlay").fadeOut(400,function(){var r,e;(a(n).find(".wraygal__thumbs").show(),1==l.fade)&&a(n).find(".wraygal__thumbs img").css("opacity","0").animate({opacity:"1"},500);if(1==l.steps)r=0,e=a(n).find(".wraygal__thumbs img").css("opacity","0"),function a(){r<e.length&&(e.eq(r++).animate({opacity:"1"},500),setTimeout(function(){a()},100))}()}),a(".video-gallery").remove()})})}}(jQuery);